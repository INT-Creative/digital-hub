---
export interface Props {
  categories: { name: string; count: number; slug: string }[];
  currentCategory?: string;
  className?: string;
}

const { categories, currentCategory = "all", className = "" } = Astro.props;

// Add "All" category
const allCategories = [
  { name: "All", count: categories.reduce((sum, cat) => sum + cat.count, 0), slug: "all" },
  ...categories
];
---

<div class={`bg-white rounded-2xl shadow-lg p-6 ${className}`}>
  <!-- Header -->
  <div class="mb-6">
    <h3 class="text-lg font-heading font-semibold text-forest-900 mb-2">
      Filter by Category
    </h3>
    <p class="text-sm text-gray-600">
      Find articles that match your interests
    </p>
  </div>
  
  <!-- Categories List -->
  <div class="space-y-2">
    {allCategories.map((category) => {
      const isActive = currentCategory === category.slug;
      return (
        <a 
          href={category.slug === "all" ? "/blog" : `/blog/category/${category.slug}`}
          class={`flex items-center justify-between p-3 rounded-lg transition-all duration-200 group ${
            isActive 
              ? "bg-sage-100 text-sage-800 shadow-sm" 
              : "hover:bg-gray-50 text-gray-700 hover:text-sage-700"
          }`}
        >
          <span class={`font-medium ${
            isActive ? "text-sage-800" : "group-hover:text-sage-700"
          }`}>
            {category.name}
          </span>
          <span class={`text-xs px-2 py-1 rounded-full ${
            isActive 
              ? "bg-sage-200 text-sage-800" 
              : "bg-gray-100 text-gray-500 group-hover:bg-sage-50 group-hover:text-sage-600"
          }`}>
            {category.count}
          </span>
        </a>
      );
    })}
  </div>
  
  <!-- Popular Tags Section -->
  <div class="mt-8 pt-6 border-t border-gray-200">
    <h4 class="text-sm font-medium text-gray-900 mb-4">
      Popular Tags
    </h4>
    <div class="flex flex-wrap gap-2">
      {[
        "Strategy", "Local SEO", "Automation", "Case Study", 
        "Performance", "Conversion", "Marketing", "Growth"
      ].map((tag) => (
        <a 
          href={`/blog/tag/${tag.toLowerCase().replace(" ", "-")}`}
          class="bg-gray-100 hover:bg-sage-100 text-gray-700 hover:text-sage-700 px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200"
        >
          #{tag}
        </a>
      ))}
    </div>
  </div>
  
  <!-- Newsletter Signup -->
  <div class="mt-8 pt-6 border-t border-gray-200">
    <div class="bg-gradient-to-br from-sage-50 to-forest-50 rounded-xl p-4">
      <h4 class="text-sm font-semibold text-forest-900 mb-2">
        Never Miss an Insight
      </h4>
      <p class="text-xs text-gray-600 mb-3">
        Get weekly transformation tips delivered to your inbox
      </p>
      <form class="space-y-2">
        <input 
          type="email" 
          placeholder="Your email"
          class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-sage-500 focus:border-transparent"
          required
        />
        <button 
          type="submit"
          class="w-full bg-sage-600 hover:bg-sage-700 text-white text-sm font-medium px-3 py-2 rounded-lg transition-colors duration-200"
        >
          Subscribe
        </button>
      </form>
    </div>
  </div>
</div>