---
import BlogCard from './BlogCard.astro';

export interface Props {
  posts: any[];
  title?: string;
  description?: string;
  showHeader?: boolean;
  columns?: 1 | 2 | 3;
  className?: string;
}

const { 
  posts, 
  title = "Latest Insights", 
  description = "Transformation strategies and practical insights for growing businesses",
  showHeader = true,
  columns = 3,
  className = ""
} = Astro.props;

// Grid column classes
const gridClasses = {
  1: "grid-cols-1",
  2: "grid-cols-1 lg:grid-cols-2",
  3: "grid-cols-1 md:grid-cols-2 lg:grid-cols-3"
};
---

<section class={`py-16 bg-gradient-to-br from-beige-50 to-sage-50 ${className}`}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {showHeader && (
      <!-- Section Header -->
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-heading font-bold text-forest-900 mb-4 text-balance">
          {title}
        </h2>
        <p class="text-lg text-gray-600 max-w-3xl mx-auto text-balance">
          {description}
        </p>
        
        <!-- Decorative Element -->
        <div class="flex justify-center mt-6">
          <div class="w-24 h-1 bg-gradient-to-r from-sage-400 to-forest-600 rounded-full"></div>
        </div>
      </div>
    )}
    
    <!-- Posts Grid -->
    {posts.length > 0 ? (
      <div class={`grid ${gridClasses[columns]} gap-8`}>
        {posts.map((post) => (
          <BlogCard
            title={post.title}
            description={post.description}
            slug={post.slug}
            publishDate={post.publishDate}
            author={post.author}
            category={post.category}
            tags={post.tags}
            image={post.image}
            readingTime={post.readingTime}
            featured={post.featured}
            className="animate-fade-in"
          />
        ))}
      </div>
    ) : (
      <!-- Empty State -->
      <div class="text-center py-16">
        <div class="max-w-md mx-auto">
          <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
            <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 011 1l4 4v9a2 2 0 01-2 2z" />
            </svg>
          </div>
          <h3 class="text-xl font-heading font-semibold text-gray-900 mb-2">
            No posts found
          </h3>
          <p class="text-gray-600 mb-6">
            We're working on creating valuable content for you. Check back soon!
          </p>
          <a 
            href="/contact"
            class="inline-flex items-center btn-primary"
          >
            Suggest a Topic
            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    )}
    
    <!-- Load More Section (for pagination) -->
    {posts.length >= 6 && (
      <div class="text-center mt-12">
        <button class="btn-outline group">
          Load More Articles
          <svg class="w-4 h-4 ml-2 group-hover:translate-y-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
          </svg>
        </button>
      </div>
    )}
  </div>
  
  <!-- Background Decoration -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-20 left-10 w-32 h-32 bg-sage-200/20 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-20 right-10 w-40 h-40 bg-forest-200/20 rounded-full blur-3xl animate-bounce-subtle"></div>
    <div class="absolute top-1/2 left-1/3 w-24 h-24 bg-beige-300/30 rounded-full blur-2xl animate-float-1"></div>
  </div>
</section>